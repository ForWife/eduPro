<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>全部订单</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="css/mui.min.css">
    <link rel="stylesheet" href="css/myorder.css">
     <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.0.js"></script>
    <script>
    $(function(){
	   	 	  //这个界面还有两个未完成的点 
	   	 	  //1.根据微信用户的openid来在数据库中索引
	   	 	  //2.为每一个card添加链接到课程详情页面
	   	 	  
	   $.ajax({
		   url:"ajaxallorder",
		   success:function(data)
		   {
			   for(var i=0; i<data.length;i++)
			   {
				   var card ='<div class="ordercard"><div class="ordercard_up">';
				   card+='<div class="ordercard_num">'+data[i].ordertime+'订购</div>';
				   switch(data[i].status)
				   {
				   case "待付款":
					   card+='<div class="ordercard_state_paying">待付款</div></div>';
					   break;
				   case "已付款":
					   card+='<div class="ordercard_state_paied">已付款</div></div>';
					   break;
				   case "已使用":
					   card+='<div class="ordercard_state_used">已使用</div></div>';
					   break;			   
				   case "已退款":
					   card+='<div class="ordercard_state_cancel">已退款</div></div>';
					   break;
				   case "退款中":
					   card+='<div class="ordercard_state_cancel">退款中</div></div>';
					   break;
				   }
				   card+=' <div class="ordercard_body"><div class="ordercard_pic"><img src="images/'+data[i].imgurl+'"></div>';
				   card+=' <div class="ordercard_name"><p>'+data[i].lname+'</p>';
				   card+='<span class="time_p">'+data[i].pubtime+'开课</span><br/>';
				   card+='开课地点:'+data[i].address+'<br/>';
				   card+='联系电话:'+data[i].tel+'<br/></div>';
				   card+='<div class="ordercard_price">￥'+data[i].lprice+'</div> </div>';
				   card+='<div class="ordercard_down">';
				   switch(data[i].status)
				   {
				   case "待付款"	:				  
					   card+=' <div class="orderbutton"><button type="button">取消</button></div><div class="orderbuttonpay"><button type="button">付款</button></div>';
					   break;
				   case "已付款":
					   card+='<div class="orderbuttonpay"><button type="button">退款</button> </div>';
					   break;
				   case "已使用":
					
					   break;			   
				   case "已退款":
					 
					   break;
				   }
				   card+='</div>';
			       $("#orderback").append(card);				   
			   }

		   }		   
	   })
	   	   
})
</script>
    <style>
        html,
        body {
            background-color: #efeff4;
        }

        .title {
            padding: 20px 15px 10px;
            color: #6d6d72;
            font-size: 15px;
            background-color: #fff;
        }
    </style>
</head>

<body>
<div class="orderback" id="orderback">
</div>
<script src="js/mui.min.js"></script>
<script>
    mui.init({
        swipeBack: false,
        keyEventBind: {
            backbutton: false //关闭back按键监听
        }
    });
</script>
</body>

</html>